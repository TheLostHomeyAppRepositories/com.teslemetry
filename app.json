{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.teslemetry",
  "api": {
    "getOAuthStatus": {
      "method": "GET",
      "path": "/oauth/status"
    },
    "deleteOAuthToken": {
      "method": "DELETE",
      "path": "/oauth/token"
    }
  },
  "brandColor": "#3D6DB5",
  "version": "0.0.7",
  "compatibility": ">=12.4.5",
  "sdk": 3,
  "platforms": [
    "local"
  ],
  "name": {
    "en": "Teslemetry"
  },
  "description": {
    "en": "Adds support for Tesla vehicles and energy products through Teslemetry"
  },
  "category": [
    "energy"
  ],
  "permissions": [],
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png",
    "xlarge": "/assets/images/xlarge.png"
  },
  "author": {
    "name": "Teslemetry",
    "email": "hello@teslemetry.com"
  },
  "bugs": {
    "url": "https://github.com/teslemetry/homey/issues"
  },
  "source": "https://github.com/teslemetry/homey",
  "homepage": "https://teslemetry.com",
  "support": "mailto:support@teslemetry.com",
  "esm": true,
  "flow": {
    "triggers": [
      {
        "title": {
          "en": "Allow export changed"
        },
        "hint": {
          "en": "This card triggers when the export setting changes."
        },
        "tokens": [
          {
            "name": "allow_export",
            "type": "string",
            "title": {
              "en": "Mode"
            },
            "example": {
              "en": "Battery and Solar"
            }
          }
        ],
        "id": "allow_export_changed"
      },
      {
        "title": {
          "en": "Backup reserve changed"
        },
        "hint": {
          "en": "This card triggers when the backup reserve percentage changes."
        },
        "tokens": [
          {
            "name": "backup_reserve",
            "type": "number",
            "title": {
              "en": "Reserve"
            },
            "example": {
              "en": "20"
            }
          }
        ],
        "id": "backup_reserve_changed"
      },
      {
        "title": {
          "en": "Operation mode changed"
        },
        "hint": {
          "en": "This card triggers when the operation mode changes."
        },
        "tokens": [
          {
            "name": "operation_mode",
            "type": "string",
            "title": {
              "en": "Mode"
            },
            "example": {
              "en": "Self Consumption"
            }
          }
        ],
        "id": "operation_mode_changed"
      },
      {
        "title": {
          "en": "Steering wheel heater changed"
        },
        "hint": {
          "en": "This card triggers when the steering wheel heater level changes."
        },
        "tokens": [
          {
            "name": "steering_wheel_heater",
            "type": "string",
            "title": {
              "en": "Level"
            },
            "example": {
              "en": "High"
            }
          }
        ],
        "id": "steering_wheel_heater_changed"
      }
    ],
    "actions": [
      {
        "title": {
          "en": "Flash lights"
        },
        "titleFormatted": {
          "en": "Flash lights on [[device]]"
        },
        "hint": {
          "en": "Flash the vehicle's lights."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=button.flash",
            "title": {
              "en": "Device"
            }
          }
        ],
        "id": "flash_lights"
      },
      {
        "title": {
          "en": "Trigger HomeLink"
        },
        "titleFormatted": {
          "en": "Trigger HomeLink on [[device]]"
        },
        "hint": {
          "en": "This card triggers the HomeLink garage door opener."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=button.homelink",
            "title": {
              "en": "Device"
            }
          }
        ],
        "id": "homelink"
      },
      {
        "title": {
          "en": "Honk horn"
        },
        "titleFormatted": {
          "en": "Honk horn on [[device]]"
        },
        "hint": {
          "en": "This card triggers the vehicle's horn."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=button.honk",
            "title": {
              "en": "Device"
            }
          }
        ],
        "id": "honk_horn"
      },
      {
        "title": {
          "en": "Start keyless driving"
        },
        "titleFormatted": {
          "en": "Start keyless driving on [[device]]"
        },
        "hint": {
          "en": "Enable keyless driving for the vehicle."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=button.keyless",
            "title": {
              "en": "Device"
            }
          }
        ],
        "id": "keyless_driving"
      },
      {
        "title": {
          "en": "Set allow export"
        },
        "titleFormatted": {
          "en": "Set allow export to [[mode]] on [[device]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=allow_export",
            "title": {
              "en": "Device"
            }
          },
          {
            "type": "dropdown",
            "name": "mode",
            "title": {
              "en": "Mode"
            },
            "values": [
              {
                "id": "battery_ok",
                "label": {
                  "en": "Battery and Solar"
                }
              },
              {
                "id": "pv_only",
                "label": {
                  "en": "Solar Only"
                }
              },
              {
                "id": "never",
                "label": {
                  "en": "Never"
                }
              }
            ]
          }
        ],
        "id": "set_allow_export"
      },
      {
        "title": {
          "en": "Set backup reserve"
        },
        "titleFormatted": {
          "en": "Set [[device]] backup reserve to [[percentage]]%"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=backup_reserve",
            "title": {
              "en": "Device"
            }
          },
          {
            "type": "range",
            "name": "percentage",
            "title": {
              "en": "Percentage"
            },
            "min": 0,
            "max": 100,
            "step": 1,
            "label": "%",
            "labelMultiplier": 1,
            "labelDecimals": 0
          }
        ],
        "id": "set_backup_reserve"
      },
      {
        "title": {
          "en": "Set operation mode"
        },
        "titleFormatted": {
          "en": "Set operation mode of [[device]] to [[mode]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=operation_mode",
            "title": {
              "en": "Device"
            }
          },
          {
            "type": "dropdown",
            "name": "mode",
            "title": {
              "en": "Mode"
            },
            "values": [
              {
                "id": "self_consumption",
                "label": {
                  "en": "Self Consumption"
                }
              },
              {
                "id": "backup",
                "label": {
                  "en": "Backup"
                }
              },
              {
                "id": "autonomous",
                "label": {
                  "en": "Autonomous"
                }
              }
            ]
          }
        ],
        "id": "set_operation_mode"
      },
      {
        "title": {
          "en": "Set steering wheel heater"
        },
        "titleFormatted": {
          "en": "Set [[device]] steering wheel heater to [[level]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=steering_wheel_heater",
            "title": {
              "en": "Device"
            }
          },
          {
            "type": "dropdown",
            "name": "level",
            "title": {
              "en": "Level"
            },
            "values": [
              {
                "id": "0",
                "label": {
                  "en": "Off"
                }
              },
              {
                "id": "1",
                "label": {
                  "en": "Low"
                }
              },
              {
                "id": "3",
                "label": {
                  "en": "High"
                }
              }
            ]
          }
        ],
        "id": "set_steering_wheel_heater"
      },
      {
        "title": {
          "en": "Wake up vehicle"
        },
        "titleFormatted": {
          "en": "Wake up [[device]]"
        },
        "hint": {
          "en": "Wake up the vehicle from sleep mode."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "capabilities=button.wakeup",
            "title": {
              "en": "Device"
            }
          }
        ],
        "id": "wake_up"
      }
    ]
  },
  "drivers": [
    {
      "connectivity": [
        "cloud"
      ],
      "platforms": [
        "local"
      ],
      "images": {
        "small": "/drivers/battery/assets/images/small.png",
        "large": "/drivers/battery/assets/images/large.png",
        "xlarge": "/drivers/battery/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "repair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        }
      ],
      "name": {
        "en": "Powerwall"
      },
      "class": "battery",
      "capabilities": [
        "measure_battery",
        "measure_power",
        "operation_mode",
        "backup_reserve",
        "onoff.charge_grid",
        "allow_export",
        "onoff.storm",
        "alarm_generic.storm",
        "meter_power.charged",
        "meter_power.discharged"
      ],
      "capabilitiesOptions": {
        "meter_power.charged": {
          "title": {
            "en": "Charged Energy"
          }
        },
        "meter_power.discharged": {
          "title": {
            "en": "Discharged Energy"
          }
        },
        "onoff.charge_grid": {
          "title": {
            "en": "Charge From Grid"
          }
        },
        "onoff.storm": {
          "title": {
            "en": "Storm Watch"
          }
        },
        "alarm_generic.storm": {
          "title": {
            "en": "Storm Watch Active"
          }
        }
      },
      "energy": {
        "homeBattery": true,
        "meterPowerImportedCapability": "meter_power.charged",
        "meterPowerExportedCapability": "meter_power.discharged"
      },
      "id": "battery"
    },
    {
      "connectivity": [
        "cloud"
      ],
      "platforms": [
        "local"
      ],
      "images": {
        "small": "/drivers/gateway/assets/images/small.png",
        "large": "/drivers/gateway/assets/images/large.png",
        "xlarge": "/drivers/gateway/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "repair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        }
      ],
      "name": {
        "en": "Energy Gateway"
      },
      "class": "sensor",
      "capabilities": [
        "measure_power.grid",
        "measure_power.load",
        "alarm_generic.off_grid",
        "alarm_generic.island",
        "meter_power.imported",
        "meter_power.exported"
      ],
      "capabilitiesOptions": {
        "meter_power.imported": {
          "title": {
            "en": "Imported Energy"
          }
        },
        "meter_power.exported": {
          "title": {
            "en": "Exported Energy"
          }
        },
        "measure_power.grid": {
          "title": {
            "en": "Grid Power"
          },
          "units": {
            "en": "W"
          }
        },
        "measure_power.load": {
          "title": {
            "en": "Load Power"
          },
          "units": {
            "en": "W"
          }
        },
        "alarm_generic.off_grid": {
          "title": {
            "en": "Grid Status"
          }
        },
        "alarm_generic.island": {
          "title": {
            "en": "Island Status"
          }
        }
      },
      "energy": {
        "cumulative": true,
        "cumulativeImportedCapability": "meter_power.imported",
        "cumulativeExportedCapability": "meter_power.exported"
      },
      "id": "gateway"
    },
    {
      "connectivity": [
        "cloud"
      ],
      "platforms": [
        "local"
      ],
      "images": {
        "small": "/drivers/solar/assets/images/small.png",
        "large": "/drivers/solar/assets/images/large.png",
        "xlarge": "/drivers/solar/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "repair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        }
      ],
      "name": {
        "en": "Solar Panel"
      },
      "class": "solarpanel",
      "capabilities": [
        "measure_power",
        "meter_power"
      ],
      "energy": {
        "meterPowerExportedCapability": "meter_power"
      },
      "id": "solar"
    },
    {
      "connectivity": [
        "cloud"
      ],
      "platforms": [
        "local"
      ],
      "images": {
        "small": "/drivers/vehicle/assets/images/small.png",
        "large": "/drivers/vehicle/assets/images/large.png",
        "xlarge": "/drivers/vehicle/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "repair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        }
      ],
      "name": {
        "en": "Tesla Vehicle"
      },
      "class": "car",
      "energy": {
        "electricCar": true
      },
      "capabilities": [
        "measure_battery",
        "measure_distance.range",
        "measure_temperature",
        "measure_temperature.outside",
        "locked",
        "onoff.charge_port",
        "thermostat_mode",
        "evcharger_charging",
        "meter_power",
        "measure_power",
        "measure_voltage",
        "measure_current",
        "onoff.sentry",
        "onoff.defrost",
        "steering_wheel_heater",
        "seat_heater.front_left",
        "seat_heater.front_right",
        "locked.charge_latch",
        "onoff.frunk",
        "onoff.trunk",
        "target_temperature",
        "windowcoverings_closed",
        "alarm_motion",
        "alarm_contact.fl",
        "alarm_contact.fr",
        "alarm_contact.rl",
        "alarm_contact.rr",
        "button.flash",
        "button.honk",
        "button.keyless",
        "button.homelink",
        "button.wakeup"
      ],
      "capabilitiesOptions": {
        "measure_distance.range": {
          "title": {
            "en": "Range"
          },
          "units": {
            "en": "km"
          }
        },
        "measure_temperature.outside": {
          "title": {
            "en": "Outside Temperature"
          }
        },
        "onoff.charge_port": {
          "title": {
            "en": "Charge Port Door"
          }
        },
        "evcharger_charging": {
          "title": {
            "en": "Charging"
          }
        },
        "onoff.sentry": {
          "title": {
            "en": "Sentry Mode"
          }
        },
        "onoff.defrost": {
          "title": {
            "en": "Defrost"
          }
        },
        "locked.charge_latch": {
          "title": {
            "en": "Charge Port Latch"
          }
        },
        "seat_heater.front_left": {
          "title": {
            "en": "Seat Heater (Front Left)"
          }
        },
        "seat_heater.front_right": {
          "title": {
            "en": "Seat Heater (Front Right)"
          }
        },
        "onoff.frunk": {
          "title": {
            "en": "Frunk"
          }
        },
        "onoff.trunk": {
          "title": {
            "en": "Trunk"
          }
        },
        "alarm_contact.fl": {
          "title": {
            "en": "Door (Front Left)"
          }
        },
        "alarm_contact.fr": {
          "title": {
            "en": "Door (Front Right)"
          }
        },
        "alarm_contact.rl": {
          "title": {
            "en": "Door (Rear Left)"
          }
        },
        "alarm_contact.rr": {
          "title": {
            "en": "Door (Rear Right)"
          }
        },
        "button.flash": {
          "title": {
            "en": "Flash Lights"
          }
        },
        "button.honk": {
          "title": {
            "en": "Honk Horn"
          }
        },
        "button.keyless": {
          "title": {
            "en": "Keyless Driving"
          }
        },
        "button.homelink": {
          "title": {
            "en": "HomeLink"
          }
        },
        "button.wakeup": {
          "title": {
            "en": "Wake Up"
          }
        }
      },
      "id": "vehicle"
    },
    {
      "connectivity": [
        "cloud"
      ],
      "platforms": [
        "local"
      ],
      "images": {
        "small": "/drivers/wall-connector/assets/images/small.png",
        "large": "/drivers/wall-connector/assets/images/large.png",
        "xlarge": "/drivers/wall-connector/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "repair": [
        {
          "id": "login_oauth2",
          "template": "login_oauth2"
        }
      ],
      "name": {
        "en": "Tesla Wall Connector"
      },
      "class": "evcharger",
      "capabilities": [
        "evcharger_charging_state",
        "measure_power",
        "connected_vehicle"
      ],
      "energy": {
        "evCharger": true,
        "meterPowerImportedCapability": "meter_power"
      },
      "id": "wall-connector"
    }
  ],
  "capabilities": {
    "allow_export": {
      "type": "enum",
      "title": {
        "en": "Allow Export"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "battery_ok",
          "title": {
            "en": "Battery and Solar"
          }
        },
        {
          "id": "pv_only",
          "title": {
            "en": "Solar Only"
          }
        },
        {
          "id": "never",
          "title": {
            "en": "Never"
          }
        }
      ]
    },
    "backup_reserve": {
      "type": "number",
      "title": {
        "en": "Backup Reserve"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "slider",
      "units": {
        "en": "%"
      },
      "min": 0,
      "max": 1,
      "decimals": 2,
      "step": 0.01
    },
    "connected_vehicle": {
      "type": "string",
      "title": {
        "en": "Connected Vehicle"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/icon.svg"
    },
    "operation_mode": {
      "type": "enum",
      "title": {
        "en": "Operation Mode"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "self_consumption",
          "title": {
            "en": "Self Consumption"
          }
        },
        {
          "id": "backup",
          "title": {
            "en": "Backup"
          }
        },
        {
          "id": "autonomous",
          "title": {
            "en": "Autonomous"
          }
        }
      ]
    },
    "seat_heater": {
      "type": "enum",
      "title": {
        "en": "Seat Heater"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "0",
          "title": {
            "en": "Off"
          }
        },
        {
          "id": "1",
          "title": {
            "en": "Low"
          }
        },
        {
          "id": "2",
          "title": {
            "en": "Medium"
          }
        },
        {
          "id": "3",
          "title": {
            "en": "High"
          }
        }
      ]
    },
    "steering_wheel_heater": {
      "type": "enum",
      "title": {
        "en": "Steering Wheel Heater"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "0",
          "title": {
            "en": "Off"
          }
        },
        {
          "id": "1",
          "title": {
            "en": "Low"
          }
        },
        {
          "id": "3",
          "title": {
            "en": "High"
          }
        }
      ]
    }
  }
}